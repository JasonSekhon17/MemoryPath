<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Memory Path</title>
		<link rel="stylesheet" type="text/css" href="style.css">
		<script>
			
			var pathArray;
			var gridArray;
			var size;
			var correct = 0;
			var level = 1;
			
			function displayGrid() {
				window.size = document.getElementById('grid').rows.length;
				
				window.gridArray = new Array(window.size);
				for (var i = 0; i < window.size; i++) {
					window.gridArray[i] = new Array(window.size);
					for (var j = 0; j < window.size; j++) {
						window.gridArray[i][j] = '';
					}
				}
				displayPath();
				
			}
			
			function displayPath() {
				window.pathArray = ["3 0", "3 1", "2 1", "1 1", "1 2", "1 3", "2 3", "2 4"]; 
				var y = document.getElementById('grid');
				var row;
				var col;
				var str;
				var cell;
				/*
				for(i = 0; i < window.size; i++){
					for(j = 0; j < window.size; j++){
						var cell = y.rows[i].cells[j];
						cell.innerHTML = '';
					}
				}
				*/
				/*
				for(i = 0; i < window.pathArray.length; i++){
					str = window.pathArray[i];
					row = parseInt(str.substring(0,1));
					col = parseInt(str.substring(2,3));
					cell = y.rows[row].cells[col];
					//y.rows[row].cells[col].style.backgroundColor = 'white';
					setTimeout('cell.style.backgroundColor = "#ffffff"', 500);
					
					window.gridArray[row][col] = 1;
					y.rows[row].cells[col].className += ' step' + i;
				}*/
				var i = 0;
				var interval = setInterval(function() {
					str = window.pathArray[i];
					row = parseInt(str.substring(0,1));
					col = parseInt(str.substring(2,3));
					cell = y.rows[row].cells[col];
					cell.style.backgroundColor = 'white';
					window.gridArray[row][col] = 1;
					y.rows[row].cells[col].className += ' step' + i;
					i++;
					if(i == window.pathArray.length) {
						clearInterval(interval);
						setTimeout(inputGrid,1000);
					}
				}, 500);
			}
			
			function inputGrid(){
				var x = document.getElementById('grid').rows.length;
				var y = document.getElementById('grid');
				
				for(i = 0; i < x; i++){
					for(j = 0; j < x; j++){
						var cell = y.rows[i].cells[j];
						//cell.className += ' row' + i + ' col' + j;
						cell.style.backgroundColor = "#0070c0";
						cell.innerHTML = '';
						cell.setAttribute('onmouseover', 'mouseOver(this)');    //for testing purposes
						cell.setAttribute('onmouseout', 'mouseOut(this)');
						cell.setAttribute('onclick', 'mouseClick(this)');
					}
				}				
			}		
			/*
			function checkStep(){
				
				return step;
			}
			*/
			// e is the tile(cell of the table) itself!!!
			function mouseClick(e) {
				
				if (e.classList.contains('step' + window.correct)){
					e.style.backgroundColor = "green";
					window.correct++;
				} else {
					if (!e.classList.contains('clicked')){
					e.style.backgroundColor = "red";
					//e.innerHTML = e.className;
					}
				}
				
				e.className += " clicked";
			}
			
			// e is the tile(cell of the table) itself!!!
			function mouseOver(e) {
				if (!e.classList.contains('clicked')){
					e.style.backgroundColor = "blue";
				}
			}
			
			// e is the tile(cell of the table) itself!!!
			function mouseOut(e) {
				if (!e.classList.contains('clicked')){
					e.style.backgroundColor = "#0070c0";
					//e.innerHTML = window.correct;
				}
			}
			
		</script>
	</head>
	<body onload="displayGrid()">
		<div id="test"></div>
		<table id="grid">
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
		</table>
	</body>
</html>